# <div align = "center">OO</div>

> Rust是面向对象的 
>
> * struct/enum 包含数据
> * impl块为之提供了方法

## 1. 封装

* 封装：调用对象外部的代码无法直接访问对象内部的实现细节，唯一可以与对象进行交互的方法就是调用它公开的API(Application Programming Interface)
* Rust:``pub``关键字(默认是私有的)

## 2. 继承

* 继承：使对象可以沿用另外一个对象的数据和行为，且无需重复定义相关代码
* Rust：没有继承
* 使用继承的原因：代码复用
  * Rust：**默认trait方法**来进行代码共享(trait方法默认实现)

## 3. 多态

* Rust：使用泛型和``trait bound``（限定参数化多态 ``bounded parametric``）
* **为共有行为定义一个trait**
  * Rust避免将struct或enum称为对象，因为他们与``impl``块是分开的
  * trait对象有些类似于其他语言中的对象：他们某种程度上组合了数据和行为
  * **trait对象与传统对象不同的地方：无法为trait对象添加数据，trait对象被专门用于抽象某些共有行为**
* Trait**对象执行的是动态派发**
  * 当trait约束作用于泛型时，Rust编译器会执行单态化(编译器会为我们用来替换泛型的每一个具体类型生成对应函数和方法的非泛型实现)
* **静态派发：通过单态化的方法生成的代码执行静态派发，在编译过程中确定调用的具体方法**
* **动态派发：无法在编译过程中确定调用的究竟是哪一种方法(多态)，编译器会产生额外的代码以便在运行时找出希望调用的代码**
* **Trait对象必须保证对象安全**
  * 只能把满足对象安全的trait转化为trait对象
  * Rust采用一系列规则来判定某个对象是否安全
    * 方法的返回类型不是self
    * 方法中不包含任何泛型类型参数

## 4. 实现面向对象的设计模式

* 状态模式(state pattern)是一种面向对象设计模式
  * 一个值拥有的内部状态由数个状态对象表达而成，而值的行为则随着内部状态的改变而改变





